{"ast":null,"code":"import _slicedToArray from\"/Users/laptop/Desktop/programming/nodechat/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef,useEffect}from\"react\";import{io}from\"socket.io-client\";import Cookies from\"js-cookie\";import axios from\"axios\";import{useDispatch,useSelector}from\"react-redux\";import{addMessage,markTypingStop,openChat,typingUsers}from\"../redux/actions/index\";import moment from\"moment\";import{Icon,InlineIcon}from\"@iconify/react\";import emotionHappyLine from\"@iconify-icons/ri/emotion-happy-line\";import attachmentLine from\"@iconify-icons/ri/attachment-line\";import sendPlane2Fill from\"@iconify-icons/ri/send-plane-2-fill\";import timeLine from\"@iconify-icons/ri/time-line\";import more2Fill from\"@iconify-icons/ri/more-2-fill\";import fileCopy2Line from\"@iconify-icons/ri/file-copy-2-line\";import saveLine from\"@iconify-icons/ri/save-line\";import chatForwardLine from\"@iconify-icons/ri/chat-forward-line\";import deleteBinLine from\"@iconify-icons/ri/delete-back-line\";import arrowLeftSLine from\"@iconify-icons/ri/arrow-left-s-line\";import recordCircleFill from\"@iconify-icons/ri/record-circle-fill\";import searchLine from\"@iconify-icons/ri/search-line\";import phoneLine from\"@iconify-icons/ri/phone-line\";import vidiconLine from\"@iconify-icons/ri/vidicon-line\";import user2Line from\"@iconify-icons/ri/user-2-line\";import moreFill from\"@iconify-icons/ri/more-fill\";import archiveLine from\"@iconify-icons/ri/archive-line\";import volumeMuteLine from\"@iconify-icons/ri/volume-mute-line\";import ProfileImg from\"./ProfileImg\";import socket from\"../config/socket_config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Chats(props){var messages=useSelector(function(state){return state.messages;});var chatData=useSelector(function(state){return state.chatData;});var user=useSelector(function(state){return state.userData;});var onlineUsers=useSelector(function(state){return state.onlineUsers;});var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),newMessage=_useState2[0],setNewMessage=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),allowTyping=_useState4[0],setAllowTyping=_useState4[1];var dispatch=useDispatch();var handleChange=function handleChange(e){setNewMessage(e.target.value);if(allowTyping){socket.emit(\"typing\",{recieverId:chatData.chatData.friendInfo.id});console.log(allowTyping);}setAllowTyping(false);setTimeout(function(){setAllowTyping(true);},5000);};var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};var closeChat=function closeChat(){return dispatch(openChat(false));};useEffect(function(){scrollToBottom();},[messages]);var handleKeyPress=function handleKeyPress(event){if(event.key===\"Enter\"){handleSubmit();}};var handleSubmit=function handleSubmit(){var messageData={message:newMessage,messageId:chatData.chatData.messageId,senderId:user.userData.id,recieverId:chatData.chatData.friendInfo.id};dispatch(addMessage(messageData));socket.emit(\"newMessage\",messageData);setNewMessage(\"\");socket.on(\"newMessage\",function(msg){if(msg.messageStatus===1){dispatch(addMessage(msg.newMessage));}console.log(msg);});};socket.on(\"typing\",function(data){dispatch(typingUsers(data.id));});var messageList=messages.messages.map(function(res,key){if(res.senderId==user.userData.id){return/*#__PURE__*/_jsx(\"li\",{ref:messagesEndRef,className:\"right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-avatar\",children:/*#__PURE__*/_jsx(ProfileImg,{src:user.userData.profileImg})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-chat-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ctext-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ctext-wrap-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:res.message}),/*#__PURE__*/_jsxs(\"p\",{className:\"chat-time mb-0\",children:[/*#__PURE__*/_jsx(Icon,{icon:timeLine,className:\"align-middle\"}),/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:moment(res.createdAt).format(\"HH:mm\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown align-self-start\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-toggle\",href:\"#\",role:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(Icon,{icon:more2Fill})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Copy\",\" \",/*#__PURE__*/_jsx(Icon,{icon:fileCopy2Line,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Save\",\" \",/*#__PURE__*/_jsx(Icon,{icon:saveLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Forward\",\" \",/*#__PURE__*/_jsx(Icon,{icon:chatForwardLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Delete\",\" \",/*#__PURE__*/_jsx(Icon,{icon:deleteBinLine,className:\" float-end text-muted\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"conversation-name\",children:user.userData.name})]})]})},key);}else{return/*#__PURE__*/_jsx(\"li\",{ref:messagesEndRef,children:/*#__PURE__*/_jsxs(\"div\",{className:\"conversation-list\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-avatar\",children:/*#__PURE__*/_jsx(\"img\",{src:user.userData.profileImg,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-chat-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ctext-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ctext-wrap-content\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:res.message}),/*#__PURE__*/_jsxs(\"p\",{className:\"chat-time mb-0\",children:[/*#__PURE__*/_jsx(Icon,{icon:timeLine,className:\" align-middle\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"align-middle\",children:moment(res.createdAt).format(\"HH:mm\")})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown align-self-start\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"dropdown-toggle\",href:\"#\",role:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(Icon,{icon:more2Fill})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Copy\",\" \",/*#__PURE__*/_jsx(Icon,{icon:fileCopy2Line,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Save\",\" \",/*#__PURE__*/_jsx(Icon,{icon:saveLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Forward\",\" \",/*#__PURE__*/_jsx(Icon,{icon:chatForwardLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Delete\",\" \",/*#__PURE__*/_jsx(Icon,{icon:deleteBinLine,className:\" float-end text-muted\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"conversation-name\",children:user.userData.name})]})]})},key);}});return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-100 overflow-hidden position-relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 p-lg-4 border-bottom user-chat-topbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4 col-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-block d-lg-none me-2 ms-0\",children:/*#__PURE__*/_jsx(\"a\",{href:\"javascript: void(0);\",className:\"user-chat-remove text-muted font-size-16 p-2\",onClick:closeChat,children:/*#__PURE__*/_jsx(Icon,{icon:arrowLeftSLine})})}),/*#__PURE__*/_jsx(\"div\",{className:\"me-3 ms-0\",children:/*#__PURE__*/_jsx(\"img\",{src:chatData.chatData.friendInfo.profileImg,className:\"rounded-circle avatar-xs\",alt:\"\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow-1 overflow-hidden\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"font-size-16 mb-0 text-truncate\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-reset user-profile-show\",onClick:props.openProfileSidebar,children:chatData.chatData.friendName}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"mb-0 text-success\",style:{fontSize:\"11px\",fontWeight:400},children:onlineUsers.onlineUsers.includes(chatData.chatData.friendInfo.id)?\"Online\":\"\"})]})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8 col-4\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline user-chat-nav text-end mb-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn nav-btn dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(Icon,{icon:searchLine})}),/*#__PURE__*/_jsx(\"div\",{className:\"dropdown-menu p-0 dropdown-menu-end dropdown-menu-md\",children:/*#__PURE__*/_jsx(\"div\",{className:\"search-box p-2\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control bg-light border-0\",placeholder:\"Search..\"})})})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item d-none d-lg-inline-block me-2 ms-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn nav-btn\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#audiocallModal\",children:/*#__PURE__*/_jsx(Icon,{icon:phoneLine})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item d-none d-lg-inline-block me-2 ms-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn nav-btn\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#videocallModal\",children:/*#__PURE__*/_jsx(Icon,{icon:vidiconLine})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item d-none d-lg-inline-block me-2 ms-0\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn nav-btn user-profile-show\",children:/*#__PURE__*/_jsx(Icon,{icon:user2Line})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn nav-btn dropdown-toggle\",type:\"button\",\"data-bs-toggle\":\"dropdown\",\"aria-haspopup\":\"true\",\"aria-expanded\":\"false\",children:/*#__PURE__*/_jsx(Icon,{icon:moreFill,className:\"ri-more-fill\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu dropdown-menu-end\",children:[/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item d-block d-lg-none user-profile-show\",href:\"#\",children:[\"View profile\",\" \",/*#__PURE__*/_jsx(Icon,{icon:user2Line,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item d-block d-lg-none\",href:\"#\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#audiocallModal\",children:[\"Audio\",\" \",/*#__PURE__*/_jsx(Icon,{icon:phoneLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item d-block d-lg-none\",href:\"#\",\"data-bs-toggle\":\"modal\",\"data-bs-target\":\"#videocallModal\",children:[\"Video\",\" \",/*#__PURE__*/_jsx(Icon,{icon:vidiconLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Archive\",\" \",/*#__PURE__*/_jsx(Icon,{icon:archiveLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Muted\",\" \",/*#__PURE__*/_jsx(Icon,{icon:volumeMuteLine,className:\" float-end text-muted\"})]}),/*#__PURE__*/_jsxs(\"a\",{className:\"dropdown-item\",href:\"#\",children:[\"Delete\",\" \",/*#__PURE__*/_jsx(Icon,{icon:deleteBinLine,className:\" float-end text-muted\"})]})]})]})})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-conversation p-3 p-lg-4\",\"data-simplebar\":\"init\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"simplebar-wrapper\",style:{margin:\"-24px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-height-auto-observer-wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-height-auto-observer\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-mask\",children:/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-offset\",style:{right:\"-20px\",bottom:\"0px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-content-wrapper\",style:{height:\"100%\",paddingRight:\"20px\",paddingBottom:\"0px\",overflow:\"hidden scroll\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-content\",style:{padding:\"24px\"},children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-unstyled mb-0\",children:Object.keys(messages.messages).length>0?messageList:false})})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-placeholder\",style:{width:\"auto\",height:\"1150px\"}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-track simplebar-horizontal\",style:{visibility:\"hidden\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-scrollbar\",style:{transform:\"translate3d(0px, 0px, 0px)\",display:\"none\",width:\"42px\"}})}),/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-track simplebar-vertical\",style:{visibility:\"visible\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"simplebar-scrollbar\",style:{height:\"590px\",transform:\"translate3d(0px, 0px, 0px)\",display:\"block\"}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-input-section p-3 p-lg-4 border-top mb-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-lg bg-light border-light\",placeholder:\"Enter Message...\",value:newMessage,onKeyPress:handleKeyPress,onChange:handleChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"chat-input-links ms-md-2 me-md-0\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"list-inline mb-0\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",\"data-bs-toggle\":\"tooltip\",\"data-bs-placement\":\"top\",title:true,\"data-bs-original-title\":\"Emoji\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\",children:/*#__PURE__*/_jsx(Icon,{icon:emotionHappyLine})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",\"data-bs-toggle\":\"tooltip\",\"data-bs-placement\":\"top\",title:true,\"data-bs-original-title\":\"Attached File\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\",children:/*#__PURE__*/_jsx(Icon,{icon:attachmentLine})})}),/*#__PURE__*/_jsx(\"li\",{className:\"list-inline-item\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary font-size-16 btn-lg chat-send waves-effect waves-light\",onClick:handleSubmit,children:/*#__PURE__*/_jsx(Icon,{icon:sendPlane2Fill})})})]})})})]})})]})});}","map":{"version":3,"sources":["/Users/laptop/Desktop/programming/nodechat/client/src/component/Chats.js"],"names":["React","useState","useRef","useEffect","io","Cookies","axios","useDispatch","useSelector","addMessage","markTypingStop","openChat","typingUsers","moment","Icon","InlineIcon","emotionHappyLine","attachmentLine","sendPlane2Fill","timeLine","more2Fill","fileCopy2Line","saveLine","chatForwardLine","deleteBinLine","arrowLeftSLine","recordCircleFill","searchLine","phoneLine","vidiconLine","user2Line","moreFill","archiveLine","volumeMuteLine","ProfileImg","socket","Chats","props","messages","state","chatData","user","userData","onlineUsers","newMessage","setNewMessage","allowTyping","setAllowTyping","dispatch","handleChange","e","target","value","emit","recieverId","friendInfo","id","console","log","setTimeout","messagesEndRef","scrollToBottom","current","scrollIntoView","behavior","closeChat","handleKeyPress","event","key","handleSubmit","messageData","message","messageId","senderId","on","msg","messageStatus","data","messageList","map","res","profileImg","createdAt","format","name","openProfileSidebar","friendName","fontSize","fontWeight","includes","margin","right","bottom","height","paddingRight","paddingBottom","overflow","padding","Object","keys","length","width","visibility","transform","display"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { io } from \"socket.io-client\";\nimport Cookies from \"js-cookie\";\nimport axios from \"axios\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  addMessage,\n  markTypingStop,\n  openChat,\n  typingUsers,\n} from \"../redux/actions/index\";\nimport moment from \"moment\";\nimport { Icon, InlineIcon } from \"@iconify/react\";\nimport emotionHappyLine from \"@iconify-icons/ri/emotion-happy-line\";\nimport attachmentLine from \"@iconify-icons/ri/attachment-line\";\nimport sendPlane2Fill from \"@iconify-icons/ri/send-plane-2-fill\";\nimport timeLine from \"@iconify-icons/ri/time-line\";\nimport more2Fill from \"@iconify-icons/ri/more-2-fill\";\nimport fileCopy2Line from \"@iconify-icons/ri/file-copy-2-line\";\nimport saveLine from \"@iconify-icons/ri/save-line\";\nimport chatForwardLine from \"@iconify-icons/ri/chat-forward-line\";\nimport deleteBinLine from \"@iconify-icons/ri/delete-back-line\";\nimport arrowLeftSLine from \"@iconify-icons/ri/arrow-left-s-line\";\nimport recordCircleFill from \"@iconify-icons/ri/record-circle-fill\";\nimport searchLine from \"@iconify-icons/ri/search-line\";\nimport phoneLine from \"@iconify-icons/ri/phone-line\";\nimport vidiconLine from \"@iconify-icons/ri/vidicon-line\";\nimport user2Line from \"@iconify-icons/ri/user-2-line\";\nimport moreFill from \"@iconify-icons/ri/more-fill\";\nimport archiveLine from \"@iconify-icons/ri/archive-line\";\nimport volumeMuteLine from \"@iconify-icons/ri/volume-mute-line\";\nimport ProfileImg from \"./ProfileImg\";\nimport socket from \"../config/socket_config\";\n\nexport default function Chats(props) {\n  const messages = useSelector((state) => state.messages);\n  const chatData = useSelector((state) => state.chatData);\n  const user = useSelector((state) => state.userData);\n  const onlineUsers = useSelector((state) => state.onlineUsers);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [allowTyping, setAllowTyping] = useState(true);\n\n  const dispatch = useDispatch();\n  const handleChange = (e) => {\n    setNewMessage(e.target.value);\n    if (allowTyping) {\n      socket.emit(\"typing\", { recieverId: chatData.chatData.friendInfo.id });\nconsole.log(allowTyping)\n\n    }\n    setAllowTyping(false);\n    setTimeout(() => {\n      setAllowTyping(true);\n    }, 5000);\n  };\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  const closeChat = () => dispatch(openChat(false));\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const handleKeyPress = (event) => {\n    if (event.key === \"Enter\") {\n      handleSubmit();\n    }\n  };\n  const handleSubmit = () => {\n    const messageData = {\n      message: newMessage,\n      messageId: chatData.chatData.messageId,\n      senderId: user.userData.id,\n      recieverId: chatData.chatData.friendInfo.id,\n    };\n    dispatch(addMessage(messageData));\n    socket.emit(\"newMessage\", messageData);\n    setNewMessage(\"\");\n    socket.on(\"newMessage\", (msg) => {\n      if (msg.messageStatus === 1) {\n        dispatch(addMessage(msg.newMessage));\n      }\n      console.log(msg);\n    });\n  };\n  socket.on(\"typing\", (data) => {\n    dispatch(typingUsers(data.id));\n  });\n  const messageList = messages.messages.map((res, key) => {\n    if (res.senderId == user.userData.id) {\n      return (\n        <li key={key} ref={messagesEndRef} className=\"right\">\n          <div className=\"conversation-list\">\n            <div className=\"chat-avatar\">\n              <ProfileImg src={user.userData.profileImg} />\n            </div>\n            <div className=\"user-chat-content\">\n              <div className=\"ctext-wrap\">\n                <div className=\"ctext-wrap-content\">\n                  <p className=\"mb-0\">{res.message}</p>\n                  <p className=\"chat-time mb-0\">\n                    <Icon icon={timeLine} className=\"align-middle\" />\n                    <span className=\"align-middle\">\n                      {moment(res.createdAt).format(\"HH:mm\")}\n                    </span>\n                  </p>\n                </div>\n                <div className=\"dropdown align-self-start\">\n                  <a\n                    className=\"dropdown-toggle\"\n                    href=\"#\"\n                    role=\"button\"\n                    data-bs-toggle=\"dropdown\"\n                    aria-haspopup=\"true\"\n                    aria-expanded=\"false\"\n                  >\n                    <Icon icon={more2Fill} />\n                  </a>\n                  <div className=\"dropdown-menu\">\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Copy{\" \"}\n                      <Icon\n                        icon={fileCopy2Line}\n                        className=\" float-end text-muted\"\n                      />\n                    </a>\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Save{\" \"}\n                      <Icon icon={saveLine} className=\" float-end text-muted\" />\n                    </a>\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Forward{\" \"}\n                      <Icon\n                        icon={chatForwardLine}\n                        className=\" float-end text-muted\"\n                      />\n                    </a>\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Delete{\" \"}\n                      <Icon\n                        icon={deleteBinLine}\n                        className=\" float-end text-muted\"\n                      />\n                    </a>\n                  </div>\n                </div>\n              </div>\n              <div className=\"conversation-name\">{user.userData.name}</div>\n            </div>\n          </div>\n        </li>\n      );\n    } else {\n      return (\n        <li key={key} ref={messagesEndRef}>\n          <div className=\"conversation-list\">\n            <div className=\"chat-avatar\">\n              <img src={user.userData.profileImg} alt=\"\" />\n            </div>\n            <div className=\"user-chat-content\">\n              <div className=\"ctext-wrap\">\n                <div className=\"ctext-wrap-content\">\n                  <p className=\"mb-0\">{res.message}</p>\n                  <p className=\"chat-time mb-0\">\n                    <Icon icon={timeLine} className=\" align-middle\" />{\" \"}\n                    <span className=\"align-middle\">\n                      {moment(res.createdAt).format(\"HH:mm\")}\n                    </span>\n                  </p>\n                </div>\n                <div className=\"dropdown align-self-start\">\n                  <a\n                    className=\"dropdown-toggle\"\n                    href=\"#\"\n                    role=\"button\"\n                    data-bs-toggle=\"dropdown\"\n                    aria-haspopup=\"true\"\n                    aria-expanded=\"false\"\n                  >\n                    <Icon icon={more2Fill} />\n                  </a>\n                  <div className=\"dropdown-menu\">\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Copy{\" \"}\n                      <Icon\n                        icon={fileCopy2Line}\n                        className=\" float-end text-muted\"\n                      />\n                    </a>\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Save{\" \"}\n                      <Icon icon={saveLine} className=\" float-end text-muted\" />\n                    </a>\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Forward{\" \"}\n                      <Icon\n                        icon={chatForwardLine}\n                        className=\" float-end text-muted\"\n                      />\n                    </a>\n                    <a className=\"dropdown-item\" href=\"#\">\n                      Delete{\" \"}\n                      <Icon\n                        icon={deleteBinLine}\n                        className=\" float-end text-muted\"\n                      />\n                    </a>\n                  </div>\n                </div>\n              </div>\n              <div className=\"conversation-name\">{user.userData.name}</div>\n            </div>\n          </div>\n        </li>\n      );\n    }\n  });\n  return (\n    <>\n      <div className=\"w-100 overflow-hidden position-relative\">\n        <div className=\"p-3 p-lg-4 border-bottom user-chat-topbar\">\n          <div className=\"row align-items-center\">\n            <div className=\"col-sm-4 col-8\">\n              <div className=\"d-flex align-items-center\">\n                <div className=\"d-block d-lg-none me-2 ms-0\">\n                  <a\n                    href=\"javascript: void(0);\"\n                    className=\"user-chat-remove text-muted font-size-16 p-2\"\n                    onClick={closeChat}\n                  >\n                    <Icon icon={arrowLeftSLine} />\n                  </a>\n                </div>\n                <div className=\"me-3 ms-0\">\n                  <img\n                    src={chatData.chatData.friendInfo.profileImg}\n                    className=\"rounded-circle avatar-xs\"\n                    alt=\"\"\n                  />\n                </div>\n                <div className=\"flex-grow-1 overflow-hidden\">\n                  <h5 className=\"font-size-16 mb-0 text-truncate\">\n                    <a\n                      href=\"#\"\n                      className=\"text-reset user-profile-show\"\n                      onClick={props.openProfileSidebar}\n                    >\n                      {chatData.chatData.friendName}\n                    </a>{\" \"}\n                    <p\n                      className=\"mb-0 text-success\"\n                      style={{ fontSize: \"11px\", fontWeight: 400 }}\n                    >\n                      {onlineUsers.onlineUsers.includes(\n                        chatData.chatData.friendInfo.id\n                      )\n                        ? \"Online\"\n                        : \"\"}\n                    </p>\n                    {/* <Icon\n                      icon={recordCircleFill}\n                      className=\" font-size-10 text-success d-inline-block ms-1\"\n                    /> */}\n                  </h5>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-sm-8 col-4\">\n              <ul className=\"list-inline user-chat-nav text-end mb-0\">\n                <li className=\"list-inline-item\">\n                  <div className=\"dropdown\">\n                    <button\n                      className=\"btn nav-btn dropdown-toggle\"\n                      type=\"button\"\n                      data-bs-toggle=\"dropdown\"\n                      aria-haspopup=\"true\"\n                      aria-expanded=\"false\"\n                    >\n                      <Icon icon={searchLine} />\n                    </button>\n                    <div className=\"dropdown-menu p-0 dropdown-menu-end dropdown-menu-md\">\n                      <div className=\"search-box p-2\">\n                        <input\n                          type=\"text\"\n                          className=\"form-control bg-light border-0\"\n                          placeholder=\"Search..\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </li>\n                <li className=\"list-inline-item d-none d-lg-inline-block me-2 ms-0\">\n                  <button\n                    type=\"button\"\n                    className=\"btn nav-btn\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#audiocallModal\"\n                  >\n                    <Icon icon={phoneLine} />\n                  </button>\n                </li>\n                <li className=\"list-inline-item d-none d-lg-inline-block me-2 ms-0\">\n                  <button\n                    type=\"button\"\n                    className=\"btn nav-btn\"\n                    data-bs-toggle=\"modal\"\n                    data-bs-target=\"#videocallModal\"\n                  >\n                    <Icon icon={vidiconLine} />\n                  </button>\n                </li>\n                <li className=\"list-inline-item d-none d-lg-inline-block me-2 ms-0\">\n                  <button\n                    type=\"button\"\n                    className=\"btn nav-btn user-profile-show\"\n                  >\n                    <Icon icon={user2Line} />\n                  </button>\n                </li>\n                <li className=\"list-inline-item\">\n                  <div className=\"dropdown\">\n                    <button\n                      className=\"btn nav-btn dropdown-toggle\"\n                      type=\"button\"\n                      data-bs-toggle=\"dropdown\"\n                      aria-haspopup=\"true\"\n                      aria-expanded=\"false\"\n                    >\n                      <Icon icon={moreFill} className=\"ri-more-fill\" />\n                    </button>\n                    <div className=\"dropdown-menu dropdown-menu-end\">\n                      <a\n                        className=\"dropdown-item d-block d-lg-none user-profile-show\"\n                        href=\"#\"\n                      >\n                        View profile{\" \"}\n                        <Icon\n                          icon={user2Line}\n                          className=\" float-end text-muted\"\n                        />\n                      </a>\n                      <a\n                        className=\"dropdown-item d-block d-lg-none\"\n                        href=\"#\"\n                        data-bs-toggle=\"modal\"\n                        data-bs-target=\"#audiocallModal\"\n                      >\n                        Audio{\" \"}\n                        <Icon\n                          icon={phoneLine}\n                          className=\" float-end text-muted\"\n                        />\n                      </a>\n                      <a\n                        className=\"dropdown-item d-block d-lg-none\"\n                        href=\"#\"\n                        data-bs-toggle=\"modal\"\n                        data-bs-target=\"#videocallModal\"\n                      >\n                        Video{\" \"}\n                        <Icon\n                          icon={vidiconLine}\n                          className=\" float-end text-muted\"\n                        />\n                      </a>\n                      <a className=\"dropdown-item\" href=\"#\">\n                        Archive{\" \"}\n                        <Icon\n                          icon={archiveLine}\n                          className=\" float-end text-muted\"\n                        />\n                      </a>\n                      <a className=\"dropdown-item\" href=\"#\">\n                        Muted{\" \"}\n                        <Icon\n                          icon={volumeMuteLine}\n                          className=\" float-end text-muted\"\n                        />\n                      </a>\n                      <a className=\"dropdown-item\" href=\"#\">\n                        Delete{\" \"}\n                        <Icon\n                          icon={deleteBinLine}\n                          className=\" float-end text-muted\"\n                        />\n                      </a>\n                    </div>\n                  </div>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        {/* end chat user head */}\n        {/* start chat conversation */}\n        <div className=\"chat-conversation p-3 p-lg-4\" data-simplebar=\"init\">\n          <div className=\"simplebar-wrapper\" style={{ margin: \"-24px\" }}>\n            <div className=\"simplebar-height-auto-observer-wrapper\">\n              <div className=\"simplebar-height-auto-observer\" />\n            </div>\n            <div className=\"simplebar-mask\">\n              <div\n                className=\"simplebar-offset\"\n                style={{ right: \"-20px\", bottom: \"0px\" }}\n              >\n                <div\n                  className=\"simplebar-content-wrapper\"\n                  style={{\n                    height: \"100%\",\n                    paddingRight: \"20px\",\n                    paddingBottom: \"0px\",\n                    overflow: \"hidden scroll\",\n                  }}\n                >\n                  <div\n                    className=\"simplebar-content\"\n                    style={{ padding: \"24px\" }}\n                  >\n                    <ul className=\"list-unstyled mb-0\">\n                      {Object.keys(messages.messages).length > 0\n                        ? messageList\n                        : false}\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div\n              className=\"simplebar-placeholder\"\n              style={{ width: \"auto\", height: \"1150px\" }}\n            />\n          </div>\n          <div\n            className=\"simplebar-track simplebar-horizontal\"\n            style={{ visibility: \"hidden\" }}\n          >\n            <div\n              className=\"simplebar-scrollbar\"\n              style={{\n                transform: \"translate3d(0px, 0px, 0px)\",\n                display: \"none\",\n                width: \"42px\",\n              }}\n            />\n          </div>\n          <div\n            className=\"simplebar-track simplebar-vertical\"\n            style={{ visibility: \"visible\" }}\n          >\n            <div\n              className=\"simplebar-scrollbar\"\n              style={{\n                height: \"590px\",\n                transform: \"translate3d(0px, 0px, 0px)\",\n                display: \"block\",\n              }}\n            />\n          </div>\n        </div>\n        {/* end chat conversation end */}\n        {/* start chat input section */}\n        <div className=\"chat-input-section p-3 p-lg-4 border-top mb-0\">\n          <div className=\"row g-0\">\n            <div className=\"col\">\n              <input\n                type=\"text\"\n                className=\"form-control form-control-lg bg-light border-light\"\n                placeholder=\"Enter Message...\"\n                value={newMessage}\n                onKeyPress={handleKeyPress}\n                onChange={handleChange}\n              />\n            </div>\n            <div className=\"col-auto\">\n              <div className=\"chat-input-links ms-md-2 me-md-0\">\n                <ul className=\"list-inline mb-0\">\n                  <li\n                    className=\"list-inline-item\"\n                    data-bs-toggle=\"tooltip\"\n                    data-bs-placement=\"top\"\n                    title\n                    data-bs-original-title=\"Emoji\"\n                  >\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\"\n                    >\n                      <Icon icon={emotionHappyLine} />\n                    </button>\n                  </li>\n                  <li\n                    className=\"list-inline-item\"\n                    data-bs-toggle=\"tooltip\"\n                    data-bs-placement=\"top\"\n                    title\n                    data-bs-original-title=\"Attached File\"\n                  >\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-link text-decoration-none font-size-16 btn-lg waves-effect\"\n                    >\n                      <Icon icon={attachmentLine} />\n                    </button>\n                  </li>\n                  <li className=\"list-inline-item\">\n                    <button\n                      type=\"submit\"\n                      className=\"btn btn-primary font-size-16 btn-lg chat-send waves-effect waves-light\"\n                      onClick={handleSubmit}\n                    >\n                      <Icon icon={sendPlane2Fill} />\n                    </button>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n        {/* end chat input section */}\n      </div>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}